import { ContentByFramework, CodeGroup } from '@/components/forMdx'

export const metadata = { title: "Enable local persistence" };

# Enable local persistence

<h2 className="not-prose text-sm text-stone-600 dark:text-stone-400 mb-5 pb-2 border-b">
  10 January 2025
</h2>

<ContentByFramework framework="react-native">
  <div>
    Version 0.9.2 introduces local persistence for React Native apps using SQLite.

    If you are upgrading from a version before 0.9.2, you need to enable local persistence by following the steps below.

    Local persistence will become the default in 0.10.0.
  </div>

  <h3>Add the required dependencies</h3>

  <div>
    As SQLite package we now use `@op-engineering/op-sqlite`.

    To get local persistence working, you need to add `@op-engineering/op-sqlite` as a direct dependency to your project and run `npx pod-install`.
  </div>

  <h3>Update your JazzProvider to enable local persistence</h3>

  <div>
    Local persistence is now disabled by default.

    To enable it, you need to pass the `storage` option to the `JazzProvider` component:
  </div>

  <CodeGroup>
    ```tsx
    <JazzProvider 
      auth={auto}
      storage="sqlite"
      peer="wss://cloud.jazz.tools/?key=you@example.com"
      AccountSchema={MyAppAccount}
    >
      <App />
    </JazzProvider>
    ```
  </CodeGroup>
</ContentByFramework>

